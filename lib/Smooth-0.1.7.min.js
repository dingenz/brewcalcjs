(function(){var t,n,r,e,i,o,u,c,p,l,a,s,h,f,d,m,g,_,y,I,C,w,T,v,M,N,b=Object.prototype.hasOwnProperty,S=function(t,n){function r(){this.constructor=t}for(var e in n)b.call(n,e)&&(t[e]=n[e]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t};r={METHOD_NEAREST:"nearest",METHOD_LINEAR:"linear",METHOD_CUBIC:"cubic",METHOD_LANCZOS:"lanczos",METHOD_SINC:"sinc",CLIP_CLAMP:"clamp",CLIP_ZERO:"zero",CLIP_PERIODIC:"periodic",CLIP_MIRROR:"mirror",CUBIC_TENSION_DEFAULT:0,CUBIC_TENSION_CATMULL_ROM:0},s={method:r.METHOD_CUBIC,cubicTension:r.CUBIC_TENSION_DEFAULT,clip:r.CLIP_CLAMP,scaleTo:0,sincFilterSize:2,sincWindow:void 0},p=function(t,n){return Math.max(0,Math.min(t,n-1))},a=function(t,n){return t%=n,0>t&&(t+=n),t},l=function(t,n){var r;return r=2*(n-1),t=a(t,r),t>n-1&&(t=r-t),t},t=function(){function t(t,n){if(this.array=t.slice(0),this.length=this.array.length,!(this.clipHelper={clamp:this.clipHelperClamp,zero:this.clipHelperZero,periodic:this.clipHelperPeriodic,mirror:this.clipHelperMirror}[n.clip]))throw"Invalid clip: "+n.clip}return t.prototype.getClippedInput=function(t){return t>=0&&t<this.length?this.array[t]:this.clipHelper(t)},t.prototype.clipHelperClamp=function(t){return this.array[p(t,this.length)]},t.prototype.clipHelperZero=function(){return 0},t.prototype.clipHelperPeriodic=function(t){return this.array[a(t,this.length)]},t.prototype.clipHelperMirror=function(t){return this.array[l(t,this.length)]},t.prototype.interpolate=function(){throw"Subclasses of AbstractInterpolator must override the interpolate() method."},t}(),i=function(t){function n(){n.__super__.constructor.apply(this,arguments)}return S(n,t),n.prototype.interpolate=function(t){return this.getClippedInput(Math.round(t))},n}(t),e=function(t){function n(){n.__super__.constructor.apply(this,arguments)}return S(n,t),n.prototype.interpolate=function(t){var n;return n=Math.floor(t),t-=n,(1-t)*this.getClippedInput(n)+t*this.getClippedInput(n+1)},n}(t),n=function(t){function n(t,r){this.tangentFactor=1-Math.max(0,Math.min(1,r.cubicTension)),n.__super__.constructor.apply(this,arguments)}return S(n,t),n.prototype.getTangent=function(t){return this.tangentFactor*(this.getClippedInput(t+1)-this.getClippedInput(t-1))/2},n.prototype.interpolate=function(t){var n,r,e,i,o;return n=Math.floor(t),r=[this.getTangent(n),this.getTangent(n+1)],e=[this.getClippedInput(n),this.getClippedInput(n+1)],t-=n,i=t*t,o=t*i,(2*o-3*i+1)*e[0]+(o-2*i+t)*r[0]+(-2*o+3*i)*e[1]+(o-i)*r[1]},n}(t),w=Math.sin,o=Math.PI,T=function(t){return 0===t?1:w(o*t)/(o*t)},g=function(t){return function(n){return T(n/t)}},y=function(t){return function(n){return T(n)*t(n)}},u=function(t){function n(t,r){if(n.__super__.constructor.apply(this,arguments),this.a=r.sincFilterSize,!r.sincWindow)throw"No sincWindow provided";this.kernel=y(r.sincWindow)}return S(n,t),n.prototype.interpolate=function(t){var n,r,e,i,o;for(n=Math.floor(t),e=0,r=i=n-this.a+1,o=n+this.a;o>=i?o>=r:r>=o;o>=i?r++:r--)e+=this.kernel(t-r)*this.getClippedInput(r);return e},n}(t),h=function(t,n){var r,e,i,o;for(o=[],e=0,i=t.length;i>e;e++)r=t[e],o.push(r[n]);return o},_=function(t,n,r){var e,i;return"0,1"===r.join?t:(e=n/(r[1]-r[0]),i=r[0],function(n){return t(e*(n-i))})},f=function(t){return Object.prototype.toString.call(t).slice("[object ".length,-1)},M=function(t){if(isNaN(t))throw"NaN in Smooth() input";if("Number"!==f(t))throw"Non-number in Smooth() input";if(!isFinite(t))throw"Infinity in Smooth() input"},N=function(t,n){var r,e,i;if("Array"!==f(t))throw"Non-vector in Smooth() input";if(t.length!==n)throw"Inconsistent dimension in Smooth() input";for(e=0,i=t.length;i>e;e++)r=t[e],M(r)},d=function(t){return"Number"===f(t)&&isFinite(t)&&!isNaN(t)},I=function(t){var n;switch(n="scaleTo param must be number or array of two numbers",f(t)){case"Number":if(!d(t))throw n;t=[0,t];break;case"Array":if(2!==t.length)throw n;if(!d(t[0])||!d(t[1]))throw n;break;default:throw n}return t},C=function(t){var n,r,e;n={};for(r in t)b.call(t,r)&&(e=t[r],n[r]=e);return n},c=function(t,r){var o,p,l,a,d,m,y,w,T,v,S;null==r&&(r={}),T={},r=C(r),T.config=C(r),null==r.scaleTo&&(r.scaleTo=r.period),null==r.sincFilterSize&&(r.sincFilterSize=r.lanczosFilterSize);for(y in s)b.call(s,y)&&(S=s[y],null==r[y]&&(r[y]=S));if(!(d={nearest:i,linear:e,cubic:n,lanczos:u,sinc:u}[r.method]))throw"Invalid method: "+r.method;if("lanczos"===r.method&&(r.sincWindow=g(r.sincFilterSize)),t.length<2)throw"Array must have at least two elements";T.count=t.length,v=function(){var n,e,i,o;switch(f(t[0])){case"Number":if(T.dimension="scalar",c.deepValidation)for(n=0,i=t.length;i>n;n++)w=t[n],M(w);return a=new d(t,r),function(t){return a.interpolate(t)};case"Array":if(T.dimension=p=t[0].length,!p)throw"Vectors must be non-empty";if(c.deepValidation)for(e=0,o=t.length;o>e;e++)S=t[e],N(S,p);return m=function(){var n;for(n=[],l=0;p>=0?p>l:l>p;p>=0?l++:l--)n.push(new d(h(t,l),r));return n}(),function(t){var n,r,e,i;for(i=[],r=0,e=m.length;e>r;r++)n=m[r],i.push(n.interpolate(t));return i};default:throw"Invalid element type: "+f(t[0])}}(),o="periodic"===r.clip?t.length:t.length-1,r.scaleTo||(r.scaleTo=o),T.domain=I(r.scaleTo),v=_(v,o,T.domain),T.domain.sort();for(y in T)b.call(T,y)&&(S=T[y],v[y]=S);return v};for(m in r)b.call(r,m)&&(v=r[m],c[m]=v);c.deepValidation=!0,("undefined"!=typeof exports&&null!==exports?exports:window).Smooth=c}).call(this);